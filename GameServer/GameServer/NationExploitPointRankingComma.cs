using ClientCommon;
using GameServer.CommandHandlers;

namespace GameServer;

public class NationExploitPointRankingCommandHandler : InGameCommandHandler<NationExploitPointRankingCommandBody, NationExploitPointRankingResponseBody>
{
	protected override bool globalLockRequired => true;

	protected override void HandleInGameCommand()
	{
		NationInstance nationInst = m_myHero.nationInst;
		Ranking myRanking = nationInst.GetExploitPointRankingOfHero(m_myHero.id);
		NationExploitPointRankingResponseBody resBody = new NationExploitPointRankingResponseBody();
		resBody.myRanking = myRanking?.ToPDRanking();
		resBody.rankings = nationInst.GetExploitPointPDRankings(Resource.instance.rankingDisplayMaxCount).ToArray();
		SendResponseOK(resBody);
	}
}
